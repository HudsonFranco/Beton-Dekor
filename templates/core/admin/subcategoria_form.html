{% extends 'base.html' %}
{% load static %}

{% block title %}{% if subcategoria %}Editar Subcategoria{% else %}Criar Nova Subcategoria{% endif %} - Beton Dekor{% endblock %}

{% block content %}
<div style="min-height: 100vh; background: #f7f7f7; padding: 40px 20px;">
    <div style="max-width: 600px; margin: 0 auto;">
        <div style="margin-bottom: 30px;">
            <h1 style="font-family: 'Montserrat'; font-weight: 700; font-size: 32px; color: #262626; margin-bottom: 10px;">
                {% if subcategoria %}Editar Subcategoria{% else %}Criar Nova Subcategoria{% endif %}
            </h1>
            <p style="font-family: 'Montserrat'; font-size: 14px; color: #666; margin-bottom: 5px;">Categoria: <strong>{{ categoria.nome }}</strong></p>
            <a href="{% url 'admin-produtos' %}" style="font-family: 'Montserrat'; font-size: 14px; color: #666; text-decoration: none;">← Voltar para lista</a>
        </div>
        
        {% if messages %}
            {% for message in messages %}
                {% if message.tags == 'error' %}
                    <div style="padding: 12px; margin-bottom: 20px; border-radius: 8px; background: #fee; color: #c33;">
                        {{ message }}
                    </div>
                {% else %}
                    <div style="padding: 12px; margin-bottom: 20px; border-radius: 8px; background: #efe; color: #3c3;">
                        {{ message }}
                    </div>
                {% endif %}
            {% endfor %}
        {% endif %}
        
        <div style="background: white; padding: 40px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
            <form method="POST">
                {% csrf_token %}
                
                {% if subcategoria and categoria_list %}
                <div style="margin-bottom: 20px;">
                    <label style="display: block; font-family: 'Montserrat'; font-weight: 600; font-size: 14px; color: #262626; margin-bottom: 8px;">Categoria Principal</label>
                    <select name="categoria_principal" required style="width: 100%; padding: 12px; border: 1px solid #e4e4e4; border-radius: 8px; font-family: 'Montserrat'; font-size: 14px;">
                        {% for cat in categoria_list %}
                        <option value="{{ cat.pk }}" {% if cat.pk == subcategoria.categoria_principal.pk %}selected{% endif %}>{{ cat.nome }}</option>
                        {% endfor %}
                    </select>
                </div>
                {% endif %}
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; font-family: 'Montserrat'; font-weight: 600; font-size: 14px; color: #262626; margin-bottom: 8px;">Nome da Subcategoria *</label>
                    <input type="text" name="nome" value="{% if subcategoria %}{{ subcategoria.nome }}{% endif %}" required style="width: 100%; padding: 12px; border: 1px solid #e4e4e4; border-radius: 8px; font-family: 'Montserrat'; font-size: 14px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; font-family: 'Montserrat'; font-weight: 600; font-size: 14px; color: #262626; margin-bottom: 8px;">Ordem</label>
                    <input type="number" name="ordem" value="{% if subcategoria %}{{ subcategoria.ordem }}{% else %}0{% endif %}" style="width: 100%; padding: 12px; border: 1px solid #e4e4e4; border-radius: 8px; font-family: 'Montserrat'; font-size: 14px;">
                    <p style="font-family: 'Montserrat'; font-size: 12px; color: #666; margin-top: 5px;">Use números menores para aparecer primeiro na lista</p>
                </div>
                
                <div style="margin-bottom: 30px;">
                    <label style="display: flex; align-items: center; font-family: 'Montserrat'; font-weight: 600; font-size: 14px; color: #262626; cursor: pointer;">
                        <input type="checkbox" name="ativo" {% if subcategoria and subcategoria.ativo or not subcategoria %}checked{% endif %} style="margin-right: 8px; width: 18px; height: 18px; cursor: pointer;">
                        Subcategoria ativa
                    </label>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button type="submit" style="flex: 1; padding: 14px; background: #262626; color: white; border: none; border-radius: 8px; font-family: 'Montserrat'; font-weight: 600; font-size: 16px; cursor: pointer;">
                        {% if subcategoria %}Salvar Alterações{% else %}Criar Subcategoria{% endif %}
                    </button>
                    <a href="{% url 'admin-produtos' %}" style="padding: 14px 32px; background: #999; color: white; border-radius: 8px; text-decoration: none; font-family: 'Montserrat'; font-weight: 600; font-size: 16px; display: inline-block;">
                        Cancelar
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

